<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.a19d8068e9a365c8f9e1.css">code{background-color:rgba(0,0,0,.04)}body{margin:0;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Roboto}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{font-style:normal;color:rgba(0,0,0,.8);-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:112.5%/1.45em georgia,serif;box-sizing:border-box;overflow-y:scroll}*,:after,:before{box-sizing:inherit}body{color:rgba(0,0,0,.8);font-size:16px;font-weight:400;word-wrap:break-word;-webkit-font-kerning:normal;font-kerning:normal;-ms-font-feature-settings:"kern","liga","clig","calt";font-feature-settings:"kern","liga","clig","calt"}img{max-width:100%;padding:0;margin:0 0 1.45rem}h1{font-size:2.25rem}h1,h2{padding:0;margin:0 0 1.45rem;color:inherit;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h2{font-size:1.62671rem}h3{font-size:1.38316rem}h3,h4{padding:0;margin:0 0 1.45rem;color:inherit;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h4{font-size:1rem}h5{font-size:.85028rem}h5,h6{padding:0;margin:0 0 1.45rem;color:inherit;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h6{font-size:.78405rem}hgroup{padding:0;margin:0 0 1.45rem}ol,ul{padding:0;margin:0 0 1.45rem 1.45rem;list-style-position:outside;list-style-image:none}dd,dl,figure,p{padding:0;margin:0 0 1.45rem}pre{margin:0 0 1.45rem;font-size:.8rem;line-height:1.42;background:rgba(0,0,0,.04);border-radius:3px;overflow:auto;word-wrap:normal;padding:1.45rem}table{font-size:1rem;line-height:1.45rem;border-collapse:collapse;width:100%}fieldset,table{padding:0;margin:0 0 1.45rem}blockquote{padding:0;margin:0 1.45rem 1.45rem}form,iframe,noscript{padding:0;margin:0 0 1.45rem}hr{padding:0;margin:0 0 calc(1.45rem - 1px);background:rgba(0,0,0,.2);border:none;height:1px}address{padding:0;margin:0 0 1.45rem}b,dt,strong,th{font-weight:700}li{margin-bottom:.725rem}ol li,ul li{padding-left:0}li>ol,li>ul{margin-left:1.45rem;margin-bottom:.725rem;margin-top:.725rem}blockquote :last-child,li :last-child,p :last-child{margin-bottom:0}li>p{margin-bottom:.725rem}code,kbd,samp{font-size:.8rem;line-height:1.45rem}abbr,abbr[title],acronym{border-bottom:1px dotted rgba(0,0,0,.5);cursor:help}abbr[title]{text-decoration:none}td,th,thead{text-align:left}td,th{border-bottom:1px solid rgba(0,0,0,.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding:.725rem .96667rem calc(.725rem - 1px)}td:first-child,th:first-child{padding-left:0}td:last-child,th:last-child{padding-right:0}code,tt{background-color:rgba(0,0,0,.04);border-radius:3px;font-family:SFMono-Regular,Consolas,Roboto Mono,Droid Sans Mono,Liberation Mono,Menlo,Courier,monospace;padding:0}pre code{background:none;line-height:1.42}code:after,code:before,tt:after,tt:before{letter-spacing:-.2em;content:" "}pre code:after,pre code:before,pre tt:after,pre tt:before{content:""}a::selection,h1::selection,h2::selection,h3::selection,h4::selection,h5::selection,h6::selection,p::selection{background:rgba(255,250,150,.8)}.gatsby-highlight{background-color:#1d1f21;border-radius:.3em;margin:.5em 0;padding:1em;overflow:auto}.gatsby-highlight pre[class*=language-].line-numbers{padding:0 0 0 2.8em;overflow:initial}@media only screen and (max-width:480px){html{font-size:100%}}</style><meta name="generator" content="Gatsby 2.23.18"/><title data-react-helmet="true">Porozumienie Gatsby-Wordpress | Wojciech Wilkowski</title><meta data-react-helmet="true" name="description" content="Wordpress, jako system zarządzania treścią, od lat cieszy się ogromną popularnością, jednak w ostatnim czasie możemy zaobserwować trend na tworzenie stron oraz blogów przy użyciu generatora stron statycznych o nazwie Gatsby. W artykule pokażę więc jak poradzić sobie, gdy trend nas przekona, lecz klient jest silnie przywiązany do panelu administracyjnego Wordpress."/><meta data-react-helmet="true" property="og:title" content="Porozumienie Gatsby-Wordpress"/><meta data-react-helmet="true" property="og:description" content="Wordpress, jako system zarządzania treścią, od lat cieszy się ogromną popularnością, jednak w ostatnim czasie możemy zaobserwować trend na tworzenie stron oraz blogów przy użyciu generatora stron statycznych o nazwie Gatsby. W artykule pokażę więc jak poradzić sobie, gdy trend nas przekona, lecz klient jest silnie przywiązany do panelu administracyjnego Wordpress."/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="@wwilkowski"/><meta data-react-helmet="true" name="twitter:title" content="Porozumienie Gatsby-Wordpress"/><meta data-react-helmet="true" name="twitter:description" content="Wordpress, jako system zarządzania treścią, od lat cieszy się ogromną popularnością, jednak w ostatnim czasie możemy zaobserwować trend na tworzenie stron oraz blogów przy użyciu generatora stron statycznych o nazwie Gatsby. W artykule pokażę więc jak poradzić sobie, gdy trend nas przekona, lecz klient jest silnie przywiązany do panelu administracyjnego Wordpress."/><link rel="icon" href="/favicon-32x32.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link href="https://fonts.googleapis.com/css?family=Roboto|Open+Sans&amp;display=swap" rel="stylesheet"/><link as="script" rel="preload" href="/styles-c2fe8482057191dca484.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-c0b34f23bddacfef5895.js"/><link as="script" rel="preload" href="/commons-99a3c504711e736f3c9e.js"/><link as="script" rel="preload" href="/framework-8dcecaaefd71e2213eb2.js"/><link as="script" rel="preload" href="/app-251a9682895dc73fd6c4.js"/><link as="script" rel="preload" href="/webpack-runtime-8f59660270f11331a017.js"/><link as="fetch" rel="preload" href="/page-data/blog/porozumienie-gatsby-wordpress/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion-css="fn47mn">.css-fn47mn{color:inherit;background-color:inherit;-webkit-transition:all 0.4s ease;transition:all 0.4s ease;min-height:100vh;}.css-fn47mn a{color:inherit;}</style><div class="css-fn47mn e1ehxxwc0"><style data-emotion-css="14wiclb">.css-14wiclb{background:transparent;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-content:center;-ms-flex-line-pack:center;align-content:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;position:relative;max-width:900px;margin:0 auto;padding:2rem;}@media (min-width:900px){.css-14wiclb{padding:2rem 0;}}</style><header class="css-14wiclb e2i1wbd3"><style data-emotion-css="1rx0lx5">.css-1rx0lx5{width:100%;padding:1rem 0;text-align:center;}</style><div class="css-1rx0lx5 e2i1wbd0"><style data-emotion-css="nb2z2f">.css-nb2z2f{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;}</style><div class="css-nb2z2f e2i1wbd4"><style data-emotion-css="1uk1gs8">.css-1uk1gs8{margin:0;}</style><h1 class="css-1uk1gs8 e2i1wbd7"><style data-emotion-css="171it42">.css-171it42{color:black;margin-left:15px;-webkit-text-decoration:none;text-decoration:none;display:inline-block;position:relative;margin-left:0;font-size:19px;font-weight:bold;}.css-171it42::after{content:"";position:absolute;width:100%;-webkit-transform:scaleX(0);-ms-transform:scaleX(0);transform:scaleX(0);height:2px;bottom:0;left:0;background-color:rgba(0,0,0,0.8);-webkit-transform-origin:bottom right;-ms-transform-origin:bottom right;transform-origin:bottom right;-webkit-transition:-webkit-transform 0.4s cubic-bezier(0.86,0,0.07,1);-webkit-transition:transform 0.4s cubic-bezier(0.86,0,0.07,1);transition:transform 0.4s cubic-bezier(0.86,0,0.07,1);}.css-171it42:hover::after{-webkit-transform:scaleX(1);-ms-transform:scaleX(1);transform:scaleX(1);-webkit-transform-origin:bottom left;-ms-transform-origin:bottom left;transform-origin:bottom left;}</style><a class="css-171it42 e2i1wbd2" href="/">wwilkowski</a></h1><style data-emotion-css="k008qs">.css-k008qs{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}</style><nav class="css-k008qs e2i1wbd5"><style data-emotion-css="9fia8g">.css-9fia8g{margin:0 2rem;}</style><div class="css-9fia8g e2i1wbd6" style="position:relative;display:inline-block;text-align:left;opacity:1;direction:ltr;border-radius:14px;-webkit-transition:opacity 0.25s;-moz-transition:opacity 0.25s;transition:opacity 0.25s;touch-action:none;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none"><div class="react-switch-bg" style="height:28px;width:56px;margin:0;position:relative;background:#333333;border-radius:14px;cursor:pointer;-webkit-transition:background 0.25s;-moz-transition:background 0.25s;transition:background 0.25s"><div style="height:28px;width:30px;position:relative;opacity:0;pointer-events:none;-webkit-transition:opacity 0.25s;-moz-transition:opacity 0.25s;transition:opacity 0.25s"><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMS4xLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiDQoJIHZpZXdCb3g9IjAgMCAxMDAgOTIuMyIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMTAwIDkyLjM7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+DQoJLnN0MHtmaWxsOiNGRkMwMjQ7fQ0KPC9zdHlsZT4NCjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik01OS43LDIxLjNjLTMuOC0xLjYtOC0yLjQtMTIuMi0yLjFjMTAuOSw1LjYsMTUuMiwxOC45LDkuNiwyOS43UzM4LjIsNjQsMjcuNCw1OC41Yy0xLjItMC42LTIuNC0xLjQtMy41LTIuMg0KCWM1LjYsMTMuOSwyMS40LDIwLjYsMzUuMiwxNUM3Myw2NS43LDc5LjcsNDkuOSw3NC4xLDM2QzcxLjUsMjkuNCw2Ni4zLDI0LjEsNTkuNywyMS4zeiIvPg0KPC9zdmc+DQo=" alt="moon icon"/></div><div style="height:28px;width:30px;position:absolute;opacity:1;right:0;top:0;pointer-events:none;-webkit-transition:opacity 0.25s;-moz-transition:opacity 0.25s;transition:opacity 0.25s"><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMS4xLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDEwMCA5Mi4zIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAxMDAgOTIuMzsiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4NCgkuc3Qwe2Rpc3BsYXk6bm9uZTt9DQoJLnN0MXtkaXNwbGF5OmlubGluZTtmaWxsOiNGRkMwMjQ7fQ0KCS5zdDJ7ZmlsbDojRkZDMDI0O30NCjwvc3R5bGU+DQo8ZyBpZD0iTGF5ZXJfMSIgY2xhc3M9InN0MCI+DQoJPHBhdGggY2xhc3M9InN0MSIgZD0iTTU5LjcsMjEuM2MtMy44LTEuNi04LTIuNC0xMi4yLTIuMWMxMC45LDUuNiwxNS4yLDE4LjksOS42LDI5LjdTMzguMiw2NCwyNy40LDU4LjVjLTEuMi0wLjYtMi40LTEuNC0zLjUtMi4yDQoJCWM1LjYsMTMuOSwyMS40LDIwLjYsMzUuMiwxNUM3Myw2NS43LDc5LjcsNDkuOSw3NC4xLDM2QzcxLjUsMjkuNCw2Ni4zLDI0LjEsNTkuNywyMS4zeiIvPg0KPC9nPg0KPGcgaWQ9IkxheWVyXzIiPg0KCTxnPg0KCQk8cGF0aCBjbGFzcz0ic3QyIiBkPSJNNTAsNjVjLTEwLjUsMC0xOC44LTguMy0xOC44LTE4LjhTMzkuNSwyNy40LDUwLDI3LjRzMTguOCw4LjMsMTguOCwxOC44UzYwLjUsNjUsNTAsNjV6Ii8+DQoJCTxwYXRoIGNsYXNzPSJzdDIiIGQ9Ik01MCwyNC43Yy0xLjYsMC0yLjctMS4xLTIuNy0yLjd2LTIuN2MwLTEuNiwxLjEtMi43LDIuNy0yLjdzMi43LDEuMSwyLjcsMi43VjIyQzUyLjcsMjMuNiw1MS42LDI0LjcsNTAsMjQuNw0KCQkJeiIvPg0KCQk8cGF0aCBjbGFzcz0ic3QyIiBkPSJNNTAsNzUuN2MtMS42LDAtMi43LTEuMS0yLjctMi43di0yLjdjMC0xLjYsMS4xLTIuNywyLjctMi43czIuNywxLjEsMi43LDIuN1Y3M0M1Mi43LDc0LjYsNTEuNiw3NS43LDUwLDc1LjcNCgkJCXoiLz4NCgkJPHBhdGggY2xhc3M9InN0MiIgZD0iTTc2LjksNDguOWgtMi43Yy0xLjYsMC0yLjctMS4xLTIuNy0yLjdjMC0xLjYsMS4xLTIuNywyLjctMi43aDIuN2MxLjYsMCwyLjcsMS4xLDIuNywyLjcNCgkJCUM3OS42LDQ3LjgsNzguNSw0OC45LDc2LjksNDguOXoiLz4NCgkJPHBhdGggY2xhc3M9InN0MiIgZD0iTTI1LjgsNDguOWgtMi43Yy0xLjYsMC0yLjctMS4xLTIuNy0yLjdjMC0xLjYsMS4xLTIuNywyLjctMi43aDIuN2MxLjYsMCwyLjcsMS4xLDIuNywyLjcNCgkJCUMyOC41LDQ3LjgsMjcuNCw0OC45LDI1LjgsNDguOXoiLz4NCgkJPHBhdGggY2xhc3M9InN0MiIgZD0iTTY4LjgsMzBjLTEuNiwwLTIuNy0xLjEtMi43LTIuN2MwLTAuOCwwLjMtMS4zLDAuOC0xLjlsMi43LTIuN2MxLjEtMS4xLDIuNy0xLjEsMy44LDBjMS4xLDEuMSwxLjEsMi43LDAsMy44DQoJCQlsLTIuNywyLjdDNzAuMSwyOS44LDY5LjYsMzAsNjguOCwzMHoiLz4NCgkJPHBhdGggY2xhc3M9InN0MiIgZD0iTTMxLjIsMzBjLTAuOCwwLTEuMy0wLjMtMS45LTAuOGwtMi43LTIuN2MtMS4xLTEuMS0xLjEtMi43LDAtMy44YzEuMS0xLjEsMi43LTEuMSwzLjgsMGwyLjcsMi43DQoJCQljMS4xLDEuMSwxLjEsMi43LDAsMy44QzMyLjUsMjkuOCwzMiwzMCwzMS4yLDMweiIvPg0KCQk8cGF0aCBjbGFzcz0ic3QyIiBkPSJNNzEuNSw3MC4zYy0wLjgsMC0xLjMtMC4zLTEuOS0wLjhsLTIuNy0yLjdjLTEuMS0xLjEtMS4xLTIuNywwLTMuOGMxLjEtMS4xLDIuNy0xLjEsMy44LDBsMi43LDIuNw0KCQkJYzEuMSwxLjEsMS4xLDIuNywwLDMuOEM3Mi44LDcwLjEsNzIuMyw3MC4zLDcxLjUsNzAuM3oiLz4NCgkJPHBhdGggY2xhc3M9InN0MiIgZD0iTTI4LjUsNzAuM2MtMS42LDAtMi43LTEuMS0yLjctMi43YzAtMC44LDAuMy0xLjMsMC44LTEuOWwyLjctMi43YzEuMS0xLjEsMi43LTEuMSwzLjgsMHMxLjEsMi43LDAsMy44DQoJCQlsLTIuNywyLjdDMjkuOSw3MC4xLDI5LjMsNzAuMywyOC41LDcwLjN6Ii8+DQoJPC9nPg0KPC9nPg0KPC9zdmc+DQo=" alt="sun icon"/></div></div><div class="react-switch-handle" style="height:26px;width:26px;background:#ffffff;display:inline-block;cursor:pointer;border-radius:50%;position:absolute;transform:translateX(1px);top:1px;outline:0;border:0;-webkit-transition:background-color 0.25s, transform 0.25s, box-shadow 0.15s;-moz-transition:background-color 0.25s, transform 0.25s, box-shadow 0.15s;transition:background-color 0.25s, transform 0.25s, box-shadow 0.15s"></div><input type="checkbox" role="switch" aria-checked="false" style="border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px"/></div></nav></div></div></header><style data-emotion-css="16nzj0e">.css-16nzj0e{max-width:900px;margin:0 auto;padding:0 2rem;}@media (min-width:900px){.css-16nzj0e{padding:0;}}</style><div class="css-16nzj0e e1ehxxwc1"><main><style data-emotion-css="hu0znc">.css-hu0znc{margin:0 auto;max-width:860px;padding:1.45rem 1.0875rem;}</style><div class="css-hu0znc e1v73u8h0"><style data-emotion-css="n1d11z">.css-n1d11z{display:inline;border-radius:1em 0 1em 0;background-image:linear-gradient( -100deg,rgba(255,250,150,0.15),rgba(255,250,150,0.8) 100%,rgba(255,250,150,0.25) );}</style><h1 class="css-n1d11z e1v73u8h1">Porozumienie Gatsby-Wordpress</h1><style data-emotion-css="wvcn4j">.css-wvcn4j{margin-top:10px;color:#606060;}</style><h3 class="css-wvcn4j e1v73u8h2">25 września 2019<!-- --> - NONE</h3><p>Gatsby, czyli generator stron statycznych nazywany przez niektorych <em>następcą Wordpressa</em> to narzędzie, które zyskało ostatnio wielką popularność.
Ilość repozytoriów na Github, które z niego korzystają to ponad sto tysięcy.</p><p>Wraz z Wordpressem może on stworzyć duet, który choć na początku nie wydawał mi się godny uwagi, to ostatecznie okazał się znakomitym rozwiązaniem.</p><h2>Narzędzia, których będziemy potrzebować</h2><h3>Wordpress</h3><p>Na potrzeby artykułu zakładam, że jesteś w stanie zainstalować Wordpressa na dowolnym hostingu. Ja posłużę się darmowym hostingiem <a href="https://www.cba.pl/pl">cba.pl</a>. Jeśli masz jakieś wątpliwości, zajrzyj na <a href="https://www.cba.pl/pl/oferta/hosting/hosting-wordpress">stronę poświęconą temu zagadnieniu</a>.</p><p>Utwórz na przykład domenę <strong><style data-emotion-css="nwjs7f">.css-nwjs7f{background:#f1f1f1;padding:0.3rem;margin:0 0.2rem 0 0;}</style><code class="css-nwjs7f e1v73u8h5">&lt;nazwa_uzytkownika&gt;.cba.pl/mywordpressblog</code></strong> i zainstaluj tam system Wordpress.</p><h3>Gatsby</h3><p>Jeśli nigdy wcześniej nie korzystałeś z Gatsbiego, to podążając za dokumentacją wystarczy, że zainstalujesz go globalnie poleceniem</p><pre class="language-shell"><code class="language-shell"><span class="token function">npm</span> <span class="token function">install</span> -g gatsby-cli</code></pre><p>Od tej pory możesz tworzyć projekty używając polecenia</p><pre class="language-shell"><code class="language-shell">gatsby new <span class="token operator">&lt;</span>nazwa_strony<span class="token operator">></span></code></pre><p>Na tym etapie polecam jednak skorzystanie z szablonów przygotowanych przez innych programistów, aby otrzymać już pewną, gotową do pracy strukturę projektu.</p><style data-emotion-css="1vo219q">.css-1vo219q{color:#777;margin:1.5rem 0;padding:0.5rem 0 0.5rem 1rem;position:relative;border-left:0.25em solid #ddd;}</style><blockquote class="css-1vo219q e1v73u8h4"><p>Listę szablonów znajdziesz <a href="https://www.gatsbyjs.org/starters/?v=2">TUTAJ</a></p></blockquote><p>Na potrzeby tego poradnika skorzystamy z najbardziej podstawowego szablonu, jakim jest <a href="https://www.gatsbyjs.org/starters/gatsbyjs/gatsby-starter-default/">gatsby-starter-default</a>.</p><p>Aby go pobrać i zainicjować projekt, używamy polecenia</p><pre class="language-shell"><code class="language-shell">gatsby new <span class="token operator">&lt;</span>nazwa_strony<span class="token operator">></span> https://github.com/gatsbyjs/gatsby-starter-default</code></pre><p>oraz przechodzimy do utworzonego folderu.</p><h3>Gitlab</h3><p>Jest to menedżer repozytoriów, który umożliwi nam przechowywanie aktualnej wersji naszej strony, jej aktualizację oraz hosting za pośrednictwem <a href="https://docs.gitlab.com/ee/user/project/pages/">Gitlab Pages</a>.</p><p>Po założeniu konta w serwisie, tworzymy nowy projekt. Wystarczy, że uzupełnimy nazwę projektu (w moim przypadku będzie to <strong>mywordpressblog</strong>) oraz automatycznie zaproponowany adres <a href="https://gitlab.com/wglugla/mywordpressblog">https://gitlab.com/wglugla/mywordpressblog</a>).</p><p>Teraz wystarczy użyć przycisku <strong>clone</strong> i skopiować link z sekcji <strong>Clone with HTTPS</strong>.</p><p>W folderze, gdzie znajduje się utworzony przez nas projekt Gatsby, inicjujemy repozytorium</p><pre class="language-shell"><code class="language-shell"><span class="token function">git</span> init
<span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span>
<span class="token function">git</span> commit -m <span class="token string">"Initial commit"</span></code></pre><p>oraz dodajemy zdalne repozytorium. W moim przypadku będą to polecenia:</p><pre class="language-shell"><code class="language-shell"><span class="token function">git</span> remote <span class="token function">add</span> origin https://gitlab.com/wglugla/mywordpressblog.git
<span class="token function">git</span> push -u origin master</code></pre><h2>Konfiguracja projektu</h2><p>Po wywołaniu polecenia</p><pre class="language-shell"><code class="language-shell">gatsby develop</code></pre><p>na stronie <strong>localhost:8000</strong> powinniśmy ujrzeć aktualną wersję strony.</p><p><style data-emotion-css="g7ms5p">.css-g7ms5p{padding:3rem 0;}</style><img src="https://i.imgur.com/zTGR1Jg.png" alt="" class="css-g7ms5p e1v73u8h3"/></p><blockquote class="css-1vo219q e1v73u8h4"><p><strong>WAŻNE:</strong> Port może ulec zmianie (na przykład, jeśli 8000 jest zajęty). Informację na ten temat można znaleźć po uruchomieniu serwera.</p></blockquote><p>Podstawowe informacje, takie jak autor, tytuł bloga lub jego opis możesz uzupełnić w pliku <strong>gatsby-config.js</strong> znajdującym się w folderze głównym projektu.</p><h2>Pobranie danych z Wordpressa</h2><p>Pierwszym celem na naszej stronie będzie wyświetlenie listy postów, które zostały przez nas utworzone.
Posłużymy się w tym celu pluginem <a href="https://www.gatsbyjs.org/packages/gatsby-source-wordpress/">gatsby-source-wordpress</a>. Pozwoli on nam na pobranie danych JSON z Wordpressa.</p><p>Instalacja przebiega bardzo prosto, wystarczy użyć polecenia</p><pre class="language-shell"><code class="language-shell"><span class="token function">npm</span> <span class="token function">install</span> --save gatsby-source-wordpress</code></pre><p>a następnie w pliku konfiguracyjnym <strong>gatsby-config.js</strong> dodać ten plugin zgodnie z podstawową konfiguracją zaproponowaną w dokumentacji.</p><pre class="language-javascript"><code class="language-javascript"><span class="token punctuation">{</span>
  resolve<span class="token operator">:</span> <span class="token string">'gatsby-source-wordpress'</span><span class="token punctuation">,</span>
  options<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// The base url to your WP site.</span>
    <span class="token comment">// baseUrl: 'wpdemo.gatsbycentral.com',</span>
    baseUrl<span class="token operator">:</span> <span class="token string">'wglugla.cba.pl'</span><span class="token punctuation">,</span>
    <span class="token comment">// WP.com sites set to true, WP.org set to false</span>
    hostingWPCOM<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token comment">// The protocol. This can be http or https.</span>
    protocol<span class="token operator">:</span> <span class="token string">'http'</span><span class="token punctuation">,</span>
    <span class="token comment">// Use 'Advanced Custom Fields' Wordpress plugin</span>
    useACF<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    auth<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// Set to true to debug endpoints on 'gatsby build'</span>
    verboseOutput<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span></code></pre><blockquote class="css-1vo219q e1v73u8h4"><p>W miejscu <strong>baseUrl</strong> należy dodać adres swojej strony.</p></blockquote><p>Po edycji pliku <strong>gatsby-config</strong> musimy ponownie uruchomić projekt poleceniem</p><pre class="language-shell"><code class="language-shell">gatsby develop</code></pre><p>Aby przetestować, czy wszystko poszło po naszej myśli, przejdźmy pod adres <strong>localhost:8000/__graphql</strong></p><p>Znajdziemy tam narzędzie pozwalające na testowanie zapytań Graphql, zanim użyjemy ich w naszej aplikacji.</p><blockquote class="css-1vo219q e1v73u8h4"><p>Jeśli nie wiesz czym jest GraphQL lub nie czujesz się na siłach, aby samemu zrozumieć jak on działa, gorąco zachęcam Cię do obejrzenia filmu lub całej serii na Youtube stworzonej przez <strong>overmenta</strong>. Listę serii o GraphQL znajdziesz <a href="https://www.youtube.com/playlist?list=PLjHmWifVUNMLivTPinla41NWyYf3pONIa">TUTAJ</a>.</p></blockquote><blockquote class="css-1vo219q e1v73u8h4"><p>Dodam, że wystarczy naprawdę podstawowa wiedza na temat działania zapytań GraphQL, abyśmy byli w stanie uzyskać potrzebne informacje.</p></blockquote><p>Dla testów, w polu tekstowym wpiszmy</p><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">query</span> IndexQuery <span class="token punctuation">{</span>
  allWordpressPost <span class="token punctuation">{</span>
    edges <span class="token punctuation">{</span>
      node <span class="token punctuation">{</span>
        title
        slug
        content
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>Po wciśnięciu kombinacji <strong>ctrl + enter</strong> naszym oczom powinien ukazać się wynik zapytania zawierający informacje o aktualnie istniejących postach.</p><p><img src="https://i.imgur.com/jHrmeO3.png" alt="" class="css-g7ms5p e1v73u8h3"/></p><h2>Jaką ścieżkę nadać wpisom</h2><p>Sposobem na prezentację wpisów na blogu będzie pobranie wszystkich artykułów, a następnie wygenerowanie, według szablonu, odpowiedniej podstrony dla każdego z nich.</p><p>Aby wszystko poszło sprawnie, należy przyjąć jedną zasadę, na podstawie której tworzone będą nazwy stron. Posłużymy się w tym celu właściwością <strong>slug</strong>, która stworzona będzie z tytułu artykułu, gdzie każde słowo napisane będzie małymi literami i oddzielone myślnikami.
W tym celu musimy skonfigurować tę właściwość w ustawieniach Wordpressa.</p><p>Po zalogowaniu do panelu administratora wchodzimy w <strong>Ustawienia -&gt; Bezpośrednie odnośniki</strong> i wybieramy opcję <strong>nazwa wpisu http://wglugla.cba.pl/przykladowy-wpis/</strong>, po czym zapisujemy zmiany.</p><h2>Lista wpisów na blogu</h2><p>Aby wylistować tytuły wszystkich wpisów, utworzymy komponent, który będzie pełnił funkcję szablonu, dzięki któremu Gatsby wygeneruje stronę główną dodając do niej pobrane dane.</p><p>W folderze <strong>src</strong> naszego projektu, utwórzmy katalog <strong>templates</strong>. Tam stwórzmy plik <strong>blog-list.js</strong>.
Na tym etapie możesz usunąć plik <strong>index.html</strong> znajdujący się w folderze <strong>pages</strong>, gdyż wygenerujemy go sami.</p><p>Zacznijmy od podstawowej struktury komponentu klasowego w React.</p><pre class="language-jsx"><code class="language-jsx">blog<span class="token operator">-</span>list<span class="token punctuation">.</span>js

<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span>
<span class="token keyword">import</span> Layout <span class="token keyword">from</span> <span class="token string">"../components/layout"</span>

<span class="token keyword">class</span> <span class="token class-name">BlogList</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Layout</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span> Oto wszystkie moje wpisy<span class="token operator">!</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Layout</span></span><span class="token punctuation">></span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> BlogList</code></pre><p>Zaimportujmy GraphQL i utwórzmy zapytanie, które wcześniej testowaliśmy.</p><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">import</span> <span class="token punctuation">{</span> graphql <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'gatsby'</span></code></pre><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">const</span> allPagesQuery <span class="token operator">=</span> graphql<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  query allPagesQuery {
    allWordpressPost {
      edges {
        node {
	  id
          title
          slug
          content
        }
      }
    }
  }
</span><span class="token template-punctuation string">`</span></span></code></pre><p>Od tej pory nasz komponent klasowy ma dostęp do odpowiedzi z zapytania za pośrednictwem <strong>props</strong>.</p><p>Użyjmy więc destrukturyzacji, aby wyciągnąć tablicę <strong>edges</strong> zawierającą wszystkie posty.</p><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">const</span> <span class="token punctuation">{</span> edges<span class="token operator">:</span> posts <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>data<span class="token punctuation">.</span>allWordpressPost</code></pre><p>oraz zmapujmy te dane, aby otrzymać listę tytułów</p><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">return</span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Layout</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span> Oto wszystkie moje wpisy<span class="token operator">!</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span>
      <span class="token punctuation">{</span>posts<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">post</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> id<span class="token punctuation">,</span> title <span class="token punctuation">}</span> <span class="token operator">=</span> post<span class="token punctuation">.</span>node
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>id<span class="token punctuation">}</span></span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span><span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>
        <span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Layout</span></span><span class="token punctuation">></span></span>
<span class="token punctuation">)</span></code></pre><p>Plikiem odpowiedzialnym za generowanie stron jest plik <strong>gatsby-node.js</strong>.</p><p>Zaimportujmy w nim <strong>path</strong> niezbędne do podawania ścieżki do naszego szablonu.</p><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"path"</span><span class="token punctuation">)</span></code></pre><p>Kolejnym krokiem będzie zdefiniowanie funkcji <strong>createPages</strong>, utworzenie zapytania graphql o wszystkie posty oraz utworzenie strony głównej przy użyciu funkcji <code class="css-nwjs7f e1v73u8h5">createPage</code>.</p><pre class="language-jsx"><code class="language-jsx">exports<span class="token punctuation">.</span><span class="token function-variable function">createPages</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> actions<span class="token punctuation">,</span> graphql <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> createPage <span class="token punctuation">}</span> <span class="token operator">=</span> actions

  <span class="token keyword">return</span> <span class="token function">graphql</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    {
      allWordpressPost {
        edges {
          node {
            id
            slug
            status
          }
        }
      }
    }
  </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>errors<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      result<span class="token punctuation">.</span>errors<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">e</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>errors<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> blogListTemplate <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">./src/templates/blog-list.js</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token function">createPage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      path<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
      component<span class="token operator">:</span> blogListTemplate<span class="token punctuation">,</span>
      context<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre><p>Teraz wystarczy ponownie uruchomić serwer i przejść pod adres <strong>localhost:8000</strong>.</p><p>Naszym oczom powinien ukazać się następujący widok.</p><p><img src="https://i.imgur.com/5itK5qN.png" alt="" class="css-g7ms5p e1v73u8h3"/></p><p>Aby sprawdzić, czy wszystko działa jak należy, przejdź do panelu administracyjnego Wordpress i dodaj nowy wpis. Następnie uruchom ponownie serwer. Na <strong>localhost:8000</strong> powinien ukazać się tytuł nowego wpisu.</p><p><img src="https://i.imgur.com/0ku05h5.png" alt="" class="css-g7ms5p e1v73u8h3"/></p><h2>Zdalny build projektu</h2><p>Utworzymy teraz plik, który pozwoli nam na zbudowanie naszego projektu bezpośrednio w repozytorium na Gitlabie.
Konfiguracja ta sprawi, że po każdym wykonanym pushu na gałęzi <strong>master</strong>, wykona się <strong>build</strong>. Pozwoli nam to na statyczne generowanie stron bez potrzeby budowania projektu lokalnie i przenoszeniu zawartości do repozytorium zdalnego.</p><p>W tym celu w głównym katalogu naszego projektu utwórzmy plik <strong>.gitlab-ci.yml</strong> oraz uzupełnijmy jego zawartość według dokumentacji Gitlaba:</p><pre class="language-json"><code class="language-json">image<span class="token operator">:</span> node<span class="token operator">:</span><span class="token number">11.10</span>.<span class="token number">1</span>

cache<span class="token operator">:</span>
  paths<span class="token operator">:</span>
    - node_modules/

pages<span class="token operator">:</span>
  script<span class="token operator">:</span>
    - yarn install
    - ./node_modules/.bin/gatsby build --prefix-paths
  artifacts<span class="token operator">:</span>
    paths<span class="token operator">:</span>
      - public
  only<span class="token operator">:</span>
    - master
</code></pre><p>Skrypt ten sprawi, że każdy push na gałąź <strong>master</strong> wykona polecenia: <strong>yarn install</strong> oraz <strong>gatsby build</strong>.</p><p>Przetestujmy to dodając pliki do repozytorium poleceniem</p><pre class="language-shell"><code class="language-shell"><span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span>
<span class="token function">git</span> commit -m <span class="token string">"Create blog list, add .gitlab-ci.yml"</span>
<span class="token function">git</span> push origin master</code></pre><p>Po pomyślnie wykonanym pushu wejdź na stronę
https://gitlab.com/<!-- -->&lt;twojanazwa&gt;<!-- -->/<!-- -->&lt;nazwarepozytorium&gt;<!-- -->/pipelines</p><p>Twoim oczom powinien ukazać się proces, który został wywołany przez Twój push. Jest to moment, w którym wykonują się polecenia zdefiniowane w pliku <strong>.gitlab-ci.yml</strong>.</p><p>Po kilku minutach, gdy proces zakończy się pomyślnie na stronie <strong>https://<!-- -->&lt;twojanazwa&gt;<!-- -->.gitlab.io/<!-- -->&lt;nazwarepozytorium&gt;</strong> powinna ukazać się strona z listą Twoich wpisów.</p><blockquote class="css-1vo219q e1v73u8h4"><p><strong>UWAGA:</strong> przy pierwszym buildzie, czas do pojawienia się strony na hostingu Gitlab Pages może wydłużyć się nawet do 30 minut.</p></blockquote><h2>Reakcja na zmiany</h2><p>Obecnie nasz projekt buduje się w momencie, gdy wykonamy commit i push do gałęzi master.
Każdorazowy push po zmianach to niesamowicie niewygodne rozwiązanie. Istnieje jednak możliwość, aby wywołać build w odpowiedzi na zmiany dokonane w panelu administracyjnym Wordpress.</p><p>W tym celu posłużymy się pluginem <a href="https://github.com/kmturley/wordpress-gitlab-trigger-pipeline">wordpress-gitlab-trigger-pipeline</a>.</p><blockquote class="css-1vo219q e1v73u8h4"><p>Ma tylko <strong>JEDNĄ</strong> gwiazdkę na Githubie. Zróbmy coś z tym.</p></blockquote><p>Idąc za plikiem README, w naszym folderze Wordpressa przechodzimy do <strong>wp_content/plugins</strong> i wklejamy tam plik <strong>gitlab-trigger-pipeline.php</strong>, który możemy pobrać z powyższego repozytorium.</p><p>Następnie przechodzimy do panelu administracyjnego Wordpress do zakładki <strong>Wtyczki</strong> i w sekcji <strong>zainstalowane wtyczki</strong> aktywujemy dodany przez nas plugin.</p><p>W repozytorium Gitlab przechodzimy do zakładki <strong>Settings</strong> -&gt; <strong>CI/CD</strong> i rozwijamy sekcję <strong>Pipeline triggers</strong>.</p><p>Tworzymy nowy trigger, nadając mu dowolny opis i naciskając przycisk <strong>Add trigger</strong>.</p><p>Otrzymany token kopiujemy do schowka i wracamy do panelu administracyjnego Wordpress.</p><p>W zakładce <strong>Ustawienia</strong> ujrzymy dodatkowe opcje, które pojawiły się za sprawą aktywacji nowego pluginu.
Uzupełniamy je następująco:
<strong>GITLAB BRANCH:</strong> master
<strong>GITLAB ID:</strong> id repozytorium (do znalezienia pod nazwą na stronie głównej repozytorium)
<strong>GITLAB TRIGGER TOKEN:</strong> <!-- -->&lt;token skopiowany do schowka&gt;</p><p><img src="https://i.imgur.com/FxX2DeD.png" alt="" class="css-g7ms5p e1v73u8h3"/></p><p>Od tego momentu każdy nowy wpis spowoduje, że w sekcji <strong>Pipelines</strong> w repozytorium na Gitlab uruchomi się skrypt z buildem i po kilku minutach ujrzymy kolejny tytuł wpisu na naszej stronie.</p><h2>Podstrony wpisów</h2><p>Zajmiemy się teraz wygenerowaniem stron statycznych dla każdego z naszych wpisów. Zmodyfikujemy więc stronę główną, dodając do tytułu wpisu odnośnik, który powinien prowadzić do strony z treścią.</p><p>Po modyfikacji komponent w pliku <strong>blog-list.js</strong> będzie wyglądał następująco</p><pre class="language-jsx"><code class="language-jsx">blog<span class="token operator">-</span>list<span class="token punctuation">.</span>js

<span class="token keyword">class</span> <span class="token class-name">BlogList</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> edges<span class="token operator">:</span> posts <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>data<span class="token punctuation">.</span>allWordpressPost
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Layout</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span> Oto wszystkie moje wpisy<span class="token operator">!</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span>
          <span class="token punctuation">{</span>posts<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">post</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> <span class="token punctuation">{</span> id<span class="token punctuation">,</span> title<span class="token punctuation">,</span> content<span class="token punctuation">,</span> slug <span class="token punctuation">}</span> <span class="token operator">=</span> post<span class="token punctuation">.</span>node
            <span class="token keyword">return</span> <span class="token punctuation">(</span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>id<span class="token punctuation">}</span></span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span><span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> <span class="token attr-name">to</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>slug<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>Czytaj więcej<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">></span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>
            <span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Layout</span></span><span class="token punctuation">></span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>Po uruchomieniu serwera faktycznie zauważymy dodane odnośniki.</p><p><img src="https://i.imgur.com/qSzqD9u.png" alt="" class="css-g7ms5p e1v73u8h3"/></p><p>Każdy z nich przenosi odpowiednio do postron: <em>/oto-kolejny-wpis</em>, <em>moj-drugi-wpis</em>, <em>witaj-swiecie</em>, jednak z racji, że nie wskazaliśmy jeszcze Gatsbiemu jak ma generować strony, po kliknięciu w odnośniki otrzymamy błąd 404.</p><p>Kolejnym krokiem będzie utworzenie nowego szablonu, na podstawie którego wygenerujemy podstrony.</p><p>W tym celu w folderze <strong>src/templates</strong> utwórzmy plik <strong>blog-post.js</strong>.</p><p>Wewnątrz pliku utwórzmy komponent funkcyjny o nazwie BlogPost i uzupełnijmy go przykładową treścią.</p><pre class="language-jsx"><code class="language-jsx">blog<span class="token operator">-</span>post<span class="token punctuation">.</span>js

<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> graphql <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"gatsby"</span>

<span class="token keyword">const</span> <span class="token function-variable function">BlogPost</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span> Oto podstrona dla wpisu na blogu<span class="token operator">!</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> BlogPost</code></pre><p>Tyle wystarczy, aby zająć się generowaniem podstron.</p><p>Jak pamiętasz, w pliku <strong>gatsby-node.js</strong> napisaliśmy już jedno zapytanie graphql, które zwróci nam wszystkie nasze posty.</p><p>Dla każdego otrzymanego posta, musimy wywołać funkcję <code class="css-nwjs7f e1v73u8h5">createPage</code> z odpowiednimi parametrami w następujący sposób:</p><pre class="language-jsx"><code class="language-jsx">blog<span class="token operator">-</span>post<span class="token punctuation">.</span>js

<span class="token keyword">const</span> blogPostTemplate <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">"./src/templates/blog-post.js"</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> posts <span class="token operator">=</span> result<span class="token punctuation">.</span>data<span class="token punctuation">.</span>allWordpressPage<span class="token punctuation">.</span>edges
posts<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> node<span class="token operator">:</span> page <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">createPage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>page<span class="token punctuation">.</span>slug<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    component<span class="token operator">:</span> blogPostTemplate<span class="token punctuation">,</span>
    context<span class="token operator">:</span> <span class="token punctuation">{</span>
      id<span class="token operator">:</span> page<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p>Po ponownym uruchomieniu serwera, dla każdego wpisu powstanie strona z treścią <em>Oto podstrona dla wpisu na blogu!</em></p><p>Teraz należy uzupełnić szablon postu tak, aby pobierał konkretne informacje. Jak mogłeś zauważyć, w wywołaniu funkcji <code class="css-nwjs7f e1v73u8h5">createPage</code> w obiekcie <strong>context</strong> przekazujemy <strong>id</strong> danego wpisu. Posłuży nam ono teraz, aby utworzyć zapytanie o wpis związany z tym id.</p><p>W pliku <strong>blog-post.js</strong>:</p><pre class="language-jsx"><code class="language-jsx">blog<span class="token operator">-</span>post<span class="token punctuation">.</span>js

<span class="token keyword">export</span> <span class="token keyword">const</span> pageQuery <span class="token operator">=</span> graphql<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  query BlogPostByID($id: String!) {
    wordpressPost(id: { eq: $id }) {
      id
      title
      slug
      content
      date(formatString: "MMMM DD, YYYY")
    }
  }
</span><span class="token template-punctuation string">`</span></span></code></pre><p>Pozostaje nam tylko zmodyfikować komponent</p><pre class="language-jsx"><code class="language-jsx">blog<span class="token operator">-</span>post<span class="token punctuation">.</span>js

<span class="token keyword">const</span> <span class="token function-variable function">BlogPost</span> <span class="token operator">=</span> <span class="token parameter">props</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> title<span class="token punctuation">,</span> date<span class="token punctuation">,</span> content <span class="token punctuation">}</span> <span class="token operator">=</span> props<span class="token punctuation">.</span>data<span class="token punctuation">.</span>wordpressPost
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span><span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token punctuation">{</span>date<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">dangerouslySetInnerHTML</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> __html<span class="token operator">:</span> content <span class="token punctuation">}</span><span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre><blockquote class="css-1vo219q e1v73u8h4"><p>Dane zwrócone w polu <strong>content</strong> są opatrzone w znaczniki html, co sprawia, że w celu ich poprawnego sformatowania musimy przekazać je jako parametry <strong>dangerouslySetInnerHTML</strong>.</p></blockquote><p>Po ponownym uruchomieniu serwera podstrony dla każdego wpisu powinny ukazywać odpowiednią treść.</p><blockquote class="css-1vo219q e1v73u8h4"><p><strong>UWAGA:</strong> Z racji, że nasza strona może być hostowana pod linkiem zawierającym prefix (w moim przypadku jest to <em>mywordpressblog</em>), informację o tym prefixie należy umieścić w pliku <strong>gatsby-config.js</strong>, dopisując do obiektu module.exports właściwość pathPrefix.</p></blockquote><pre class="language-json"><code class="language-json">module.exports = <span class="token punctuation">{</span>
  pathPrefix<span class="token operator">:</span> `/mywordpressblog`<span class="token punctuation">,</span>
<span class="token punctuation">}</span></code></pre><p>Tak oto otrzymujemy w pełni sprawny blog, który pozwala nam na zarządzanie treścia z poziomu systemu zarządzania treścią Wordpress.</p><p>W celu dodatkowej pomocy, udostępniam dla Ciebie dostęp do <a href="https://gitlab.com/wglugla/mywordpressblog">repozytorium</a>, które posłużyło mi do napisania tego artykułu oraz <a href="https://wglugla.gitlab.io/mywordpressblog/">podgląd</a> finalnej wersji zbudowanego bloga.</p></div></main><style data-emotion-css="1l4w6pd">.css-1l4w6pd{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}</style><footer class="css-1l4w6pd e1ehxxwc3"><p>© <!-- -->2021<!-- -->, Built with<!-- --> </p><style data-emotion-css="o5uqvq">.css-o5uqvq{margin-left:5px;}</style><a href="https://www.gatsbyjs.org" class="css-o5uqvq e1ehxxwc2">Gatsby</a></footer></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/porozumienie-gatsby-wordpress";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-251a9682895dc73fd6c4.js"],"component---src-pages-404-js":["/component---src-pages-404-js-4c9fa5790aa9ec081a1b.js"],"component---src-pages-blog-js":["/component---src-pages-blog-js-9428d47e0f0f73682d52.js"],"component---src-pages-index-js":["/component---src-pages-index-js-03cba93cc13a6f3fc9e6.js"],"component---src-pages-projects-js":["/component---src-pages-projects-js-fa916d6b33086f86ced4.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-c0b34f23bddacfef5895.js"]};/*]]>*/</script><script src="/webpack-runtime-8f59660270f11331a017.js" async=""></script><script src="/app-251a9682895dc73fd6c4.js" async=""></script><script src="/framework-8dcecaaefd71e2213eb2.js" async=""></script><script src="/commons-99a3c504711e736f3c9e.js" async=""></script><script src="/component---src-templates-blog-post-js-c0b34f23bddacfef5895.js" async=""></script><script src="/styles-c2fe8482057191dca484.js" async=""></script></body></html>